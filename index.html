<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>PlayCoins Simulator</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <header>
    <h1>PlayCoins Simulator</h1>
    <div id="balance">Coins: 0</div>
    <div id="logged-in-user">Not logged in</div>
  </header>

  <!-- Login / Register -->
  <section class="auth-section">
    <h2>Register / Login</h2>

    <!-- Register -->
    <input id="reg-username" placeholder="Username" />
    <input id="reg-password" type="password" placeholder="Password" />
    <button id="register-btn">Register</button>

    <br><br>

    <!-- Login -->
    <input id="login-username" placeholder="Username" />
    <input id="login-password" type="password" placeholder="Password" />
    <button id="login-btn">Login</button>
  </section>

  <!-- Deposit / Withdraw -->
  <section class="controls">
    <input id="amount" type="number" placeholder="Amount" />
    <button id="deposit-btn">Deposit</button>

    <div id="withdraw-container">
      <p>
        To withdraw coins: Make a Gamepass with the amount of coins you entered
        and paste the link below.
      </p>
      <input id="withdraw-link" placeholder="Paste your Roblox Gamepass link here" />
      <button id="withdraw-btn">Request Withdraw</button>
    </div>
  </section>

  <!-- Games -->
  <section class="games">
    <h2>Games</h2>
    <ul>
      <li><a href="games/blackjack.html">Blackjack</a></li>
      <li><a href="games/crash.html">Crash</a></li>
      <li><a href="games/crossroad.html">Crossroad</a></li>
      <li><a href="games/dice.html">Dice</a></li>
      <li><a href="games/mines.html">Mines</a></li>
      <li><a href="games/cases.html">Cases</a></li>
      <li><a href="games/upgrader.html">Upgrader</a></li>
    </ul>
  </section>

  // ----------------------------
  // ADMIN: ADD / REMOVE COINS
  // ----------------------------
  const manualAddBtn = document.getElementById("manual-add-btn");

  manualAddBtn.addEventListener("click", () => {
    if (currentUser !== "FF2DMD") {
      alert("Only FF2DMD can use this panel");
      return;
    }

    const targetUser = document.getElementById("manual-username").value.trim();
    const amount = Number(document.getElementById("manual-amount").value);

    if (!targetUser || isNaN(amount) || amount === 0) {
      alert("Enter a valid username and amount");
      return;
    }

    if (!accounts[targetUser]) {
      alert("User does not exist");
      return;
    }

    // Apply coins
    accounts[targetUser].balance += amount;

    // Log transaction
    addTransaction(
      targetUser,
      amount > 0 ? "Admin Add" : "Admin Remove",
      amount
    );

    // Save
    localStorage.setItem("accounts", JSON.stringify(accounts));

    // Update UI if admin edited self
    if (targetUser === currentUser) {
      updateBalanceDisplay();
      renderTransactionLog();
    }

    alert(
      `${amount > 0 ? "Added" : "Removed"} ${Math.abs(amount)} coins for ${targetUser}`
    );

    document.getElementById("manual-username").value = "";
    document.getElementById("manual-amount").value = "";
  });


  <!-- Transaction Log -->
  <div id="log"></div>

  <script>
    // ----------------------------
    // GLOBALS
    // ----------------------------
    const registerBtn = document.getElementById("register-btn");
    const loginBtn = document.getElementById("login-btn");

    const regUsernameEl = document.getElementById("reg-username");
    const regPasswordEl = document.getElementById("reg-password");

    const loginUsernameEl = document.getElementById("login-username");
    const loginPasswordEl = document.getElementById("login-password");

    const loggedInUserEl = document.getElementById("logged-in-user");
    const balanceEl = document.getElementById("balance");
    const logEl = document.getElementById("log");
    const amountEl = document.getElementById("amount");

    let accounts = JSON.parse(localStorage.getItem("accounts")) || {};
    let currentUser = localStorage.getItem("currentUser") || null;

    let pendingDeposits = JSON.parse(localStorage.getItem("pendingDeposits")) || [];
    let pendingWithdrawals = JSON.parse(localStorage.getItem("pendingWithdrawals")) || [];

    // ----------------------------
    // HELPERS
    // ----------------------------
    function getUserData(username = currentUser) {
      if (!username) return null;
      accounts = JSON.parse(localStorage.getItem("accounts")) || {};
      return accounts[username];
    }

    function updateLoggedInDisplay() {
      loggedInUserEl.textContent = currentUser
        ? `Logged in as: ${currentUser}`
        : "Not logged in";

      document.getElementById("admin-panel").style.display =
        currentUser === "FF2DMD" ? "block" : "none";
    }

    function updateBalanceDisplay() {
      const user = getUserData();
      balanceEl.textContent = `Coins: ${user ? user.balance : 0}`;
    }

    function addTransaction(username, type, amount) {
      const user = getUserData(username);
      if (!user) return;

      user.transactionLog.push({
        type,
        amount,
        time: new Date().toLocaleString()
      });

      accounts[username] = user;
      localStorage.setItem("accounts", JSON.stringify(accounts));

      if (username === currentUser) renderTransactionLog();
    }

    function renderTransactionLog() {
      const user = getUserData();
      if (!user) return;

      logEl.innerHTML = "";
      user.transactionLog.forEach(t => {
        const p = document.createElement("p");
        p.textContent = `[${t.time}] ${t.type}: ${t.amount} coins`;
        logEl.prepend(p);
      });
    }

    // ----------------------------
    // REGISTER
    // ----------------------------
    registerBtn.addEventListener("click", () => {
      const username = regUsernameEl.value.trim();
      const password = regPasswordEl.value.trim();

      if (!username || !password) return alert("Fill all fields");
      if (accounts[username]) return alert("Username exists");

      accounts[username] = {
        password,
        balance: 5,
        transactionLog: []
      };

      localStorage.setItem("accounts", JSON.stringify(accounts));
      alert(`Registered ${username}`);

      regUsernameEl.value = "";
      regPasswordEl.value = "";
    });

    // ----------------------------
    // LOGIN
    // ----------------------------
    loginBtn.addEventListener("click", () => {
      const username = loginUsernameEl.value.trim();
      const password = loginPasswordEl.value.trim();

      if (!accounts[username]) return alert("No account");
      if (accounts[username].password !== password)
        return alert("Wrong password");

      currentUser = username;
      localStorage.setItem("currentUser", currentUser);

      updateLoggedInDisplay();
      updateBalanceDisplay();
      renderTransactionLog();

      alert(`Logged in as ${username}`);
    });

    // ----------------------------
    // INIT
    // ----------------------------
    updateLoggedInDisplay();
    updateBalanceDisplay();
    renderTransactionLog();
  </script>
</body>
</html>
